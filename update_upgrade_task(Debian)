---
- name: Update and Upgrade Debian
  hosts: all

  tasks:
    - name: Update APT package cache
      become: true
      shell: apt-get update
    
    - name: Upgrade all packages
      become: true
      apt:
        upgrade: yes

    - name: Perform dist-upgrade
      become: true
      apt:
        upgrade: dist

    - name: Clean up package cache
      become: true
      apt:
        autoremove: yes
        autoclean: yes
